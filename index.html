<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒã‚¤ã‚»ãƒˆãƒªãƒ¡ãƒ¼ã‚«ãƒ¼ï¼ˆéå…¬å¼ï¼‰</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{min-height:100vh;background:linear-gradient(135deg,#0a0a1a 0%,#0f172a 40%,#1a0a2e 100%);color:#e2e8f0;font-family:'Helvetica Neue','Segoe UI',sans-serif;overflow-x:hidden}
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#334155;border-radius:99px}
.bee{position:fixed;font-size:20px;opacity:.25;pointer-events:none;animation:fd 8s linear infinite}
@keyframes fd{0%{transform:translateY(-30px) rotate(0);opacity:0}10%{opacity:.25}90%{opacity:.25}100%{transform:translateY(105vh) rotate(360deg);opacity:0}}
@keyframes si{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.header{text-align:center;padding:28px 16px 0}
.road{font-size:28px;font-weight:900;color:#94a3b8;letter-spacing:4px;text-transform:uppercase}
.title{font-size:28px;font-weight:900;background:linear-gradient(135deg,#FFD700,#F59E0B,#EF4444);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:4px 0;letter-spacing:2px}
.subtitle{font-size:14px;color:#cbd5e1}
.unofficial{font-size:11px;color:#94a3b8;margin-top:2px}
.user-info{font-size:13px;color:#94a3b8;margin-top:6px}
.user-info button{background:none;border:none;color:#94a3b8;cursor:pointer;font-size:12px;text-decoration:underline;margin-left:4px}
.cd-heading{text-align:center;font-size:14px;color:#94a3b8;padding-top:20px;letter-spacing:1px}
.cd-wrap{display:flex;justify-content:center;gap:10px;padding:10px 16px 16px}
.cd-box{background:linear-gradient(135deg,#1a1a2e,#16213e);border:2px solid #FFD700;border-radius:12px;padding:12px 14px;min-width:68px;text-align:center;box-shadow:0 0 20px rgba(255,215,0,.2),inset 0 0 20px rgba(255,215,0,.05)}
.cd-num{font-size:32px;font-weight:800;color:#FFD700;font-family:monospace;letter-spacing:2px;text-shadow:0 0 10px rgba(255,215,0,.5)}
.cd-label{font-size:10px;color:#94a3b8;text-transform:uppercase;letter-spacing:2px;display:block;margin-top:4px}
.cd-colon{color:#FFD700;font-size:28px;font-weight:700;padding-top:12px;transition:opacity .3s}
.desc-wrap{max-width:520px;margin:0 auto 16px}
.desc-wrap summary{color:#FFD700;font-size:15px;font-weight:700;cursor:pointer;list-style:none;text-align:center;padding:12px 20px;background:rgba(255,255,255,.03);border-radius:10px;border:1px solid rgba(255,255,255,.08)}
.desc-wrap summary::-webkit-details-marker{display:none}
.desc-body{font-size:14px;color:#cbd5e1;line-height:2;padding:16px 20px 12px;text-align:left}
.desc-tip{background:rgba(255,215,0,.05);border:1px solid rgba(255,215,0,.1);border-radius:8px;padding:10px 14px;margin:8px 0 12px}
.tabs{display:flex;justify-content:center;gap:8px;padding:4px 16px 16px}
.tab{padding:10px 24px;border-radius:99px;border:none;font-size:15px;font-weight:600;cursor:pointer;background:rgba(255,255,255,.05);color:#94a3b8;transition:all .2s}
.tab.active{background:linear-gradient(135deg,#FFD700,#F59E0B);color:#000;box-shadow:0 4px 15px rgba(255,215,0,.3)}
.content{padding:0 16px 24px;max-width:580px;margin:0 auto}
.card{background:rgba(255,255,255,.02);border-radius:16px;padding:20px;border:1px solid rgba(255,255,255,.05);margin-bottom:16px;animation:si .3s ease}
.nick-screen{min-height:100vh;display:flex;align-items:center;justify-content:center}
.nick-box{text-align:center;padding:32px;max-width:360px}
.nick-input{width:100%;padding:14px 16px;border-radius:10px;border:2px solid rgba(255,215,0,.25);background:rgba(255,255,255,.05);color:#e2e8f0;font-size:16px;outline:none;text-align:center;margin-bottom:12px}
.nick-input:focus{border-color:rgba(255,215,0,.6)}
.nick-btn{width:100%;padding:14px 0;border-radius:10px;border:none;background:linear-gradient(135deg,#FFD700,#F59E0B);color:#000;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 4px 20px rgba(255,215,0,.3)}
.sec-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;flex-wrap:wrap;gap:8px}
.sec-title{font-size:18px;font-weight:700;color:#e2e8f0}
.badge{font-size:14px;font-weight:700;padding:5px 14px;border-radius:99px}
.badge-gold{color:#d4a017;background:rgba(212,160,23,.1)}
.badge-red{color:#EF4444;background:rgba(239,68,68,.1)}
.filters{display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-bottom:14px}
.filter-btn{padding:10px 8px;border-radius:10px;border:none;font-size:13px;cursor:pointer;font-weight:600;transition:all .2s;text-align:center}
.song-item{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.05);background:rgba(255,255,255,.02);margin-bottom:6px;transition:all .2s;cursor:pointer;-webkit-tap-highlight-color:transparent}
.song-item.checked{background:rgba(255,215,0,.05);border-color:rgba(255,215,0,.2)}
.song-item.inset{background:rgba(255,255,255,.01);border-color:rgba(255,255,255,.03);opacity:.45;cursor:default}
.song-check{width:22px;height:22px;border-radius:6px;border:2px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;font-size:14px}
.song-item.checked .song-check{border-color:#d4a017;background:rgba(255,215,0,.12);color:#d4a017}
.song-item.inset .song-check{border-color:rgba(255,255,255,.1);background:rgba(255,255,255,.03);color:#64748b}
.song-info{flex:1;min-width:0}
.song-name{font-size:15px;color:#f1f5f9;font-weight:500;word-break:break-word}
.song-album{font-size:11px;padding:3px 10px;border-radius:99px;display:inline-block;margin-top:3px}
.submit-bar{position:sticky;bottom:0;background:linear-gradient(to top,rgba(10,10,26,.98) 60%,transparent);padding:16px 0 8px;margin-top:12px;text-align:center}
.submit-btn{padding:14px 40px;border-radius:99px;border:none;font-size:16px;font-weight:700;cursor:pointer;background:linear-gradient(135deg,#FFD700,#F59E0B);color:#000;box-shadow:0 4px 20px rgba(255,215,0,.3);transition:all .2s}
.submit-btn:disabled{background:#334155;color:#64748b;box-shadow:none;cursor:default}
.submit-btn:not(:disabled):active{transform:scale(.97)}
.my-row{display:flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;margin-bottom:4px;border:1px solid rgba(255,255,255,.04);background:rgba(255,255,255,.02)}
.my-row.encore{background:rgba(255,215,0,.06);border-color:rgba(255,215,0,.15)}
.my-num{color:#94a3b8;font-size:14px;min-width:30px;font-weight:700}
.my-row.encore .my-num{color:#FFD700}
.my-title{flex:1;font-size:15px;color:#f1f5f9;word-break:break-word}
.my-arrows{display:flex;flex-direction:column;gap:2px}
.my-arrow{background:rgba(255,255,255,.06);border:none;border-radius:4px;width:28px;height:22px;cursor:pointer;color:#cbd5e1;font-size:13px;display:flex;align-items:center;justify-content:center;transition:background .15s}
.my-arrow:active{background:rgba(255,215,0,.2)}
.my-arrow:disabled{opacity:.2;cursor:default}
.my-rm{background:none;border:none;cursor:pointer;color:#EF4444;font-size:15px;padding:4px}
.en-toggle{padding:3px 8px;border-radius:6px;font-size:11px;font-weight:700;cursor:pointer;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.04);color:#64748b;transition:all .2s;white-space:nowrap}
.en-toggle.active{border-color:rgba(255,215,0,.4);background:rgba(255,215,0,.12);color:#FFD700}
.en-toggle:disabled{opacity:.3;cursor:default}
.encore-divider{display:flex;align-items:center;gap:10px;margin:10px 0 6px;padding:0 4px}
.encore-divider-line{flex:1;height:1px;background:rgba(255,215,0,.25)}
.encore-divider-text{font-size:12px;color:#FFD700;font-weight:700;letter-spacing:1px}
.encore-badge{display:inline-block;font-size:12px;color:#FFD700;background:rgba(255,215,0,.1);border:1px solid rgba(255,215,0,.2);border-radius:99px;padding:3px 12px;font-weight:600}
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:#FFD700;color:#000;padding:12px 28px;border-radius:99px;font-size:15px;font-weight:600;z-index:9999;box-shadow:0 4px 20px rgba(255,215,0,.4);animation:si .3s ease;pointer-events:none}
.btn-sm{padding:8px 16px;border-radius:8px;border:none;font-size:13px;font-weight:600;cursor:pointer}
.btn-clear{background:rgba(239,68,68,.1);color:#EF4444;border:1px solid rgba(239,68,68,.25)}
.btn-share{background:linear-gradient(135deg,rgba(29,161,242,.2),rgba(29,161,242,.1));color:#1DA1F2;border:1px solid rgba(29,161,242,.3);padding:10px 20px;border-radius:10px;font-size:14px;font-weight:700;cursor:pointer;width:100%;text-align:center}
.empty{text-align:center;padding:30px;color:#94a3b8;font-size:15px;border:2px dashed rgba(255,255,255,.08);border-radius:12px}
.shared-overlay{background:rgba(255,215,0,.03);border:1px solid rgba(255,215,0,.15);border-radius:12px;padding:16px;margin-bottom:16px}
.shared-song{padding:6px 10px;border-radius:8px;margin-bottom:3px;border:1px solid rgba(255,255,255,.04);background:rgba(255,255,255,.02);display:flex;align-items:center;gap:8px}
.shared-song.enc{background:rgba(255,215,0,.06);border-color:rgba(255,215,0,.15)}
.disclaimer{max-width:520px;margin:16px auto;padding:14px 18px;background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.25);border-radius:10px;text-align:center;font-size:13px;color:#f87171;line-height:1.8}
@media(max-width:420px){.cd-box{min-width:54px;padding:10px}.cd-num{font-size:26px}.tab{padding:8px 16px;font-size:13px}.title{font-size:22px}.road{font-size:22px}}
</style>
</head>
<body>

<div id="nickScreen" class="nick-screen">
  <div class="nick-box">
    <div style="font-size:48px;margin-bottom:16px">&#x1f41d;</div>
    <div class="road">ROAD TO LIQUIDROOM</div>
    <div class="title" style="margin-bottom:4px">ãƒã‚¤ã‚»ãƒˆãƒªãƒ¡ãƒ¼ã‚«ãƒ¼</div>
    <div class="unofficial">éå…¬å¼ãƒ•ã‚¡ãƒ³ä¼ç”»</div>
    <p style="color:#cbd5e1;font-size:15px;margin:16px 0 24px">2026.3.22 æµæ¯”å¯¿LIQUIDROOM<br>è‡ªåˆ†ã ã‘ã®ã‚»ãƒˆãƒªã‚’ä½œã‚ã†ï¼</p>
    <input id="nickInput" class="nick-input" placeholder="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰" maxlength="20">
    <button id="nickBtn" class="nick-btn" onclick="enterApp()">&#x1f41d; ã¯ã˜ã‚ã‚‹</button>
    <p style="color:#94a3b8;font-size:13px;margin-top:6px">â€»ç©ºæ¬„ã®å ´åˆã¯ã€Œåç„¡ã—ã‚¯ãƒ«ãƒ¼ã€ã«ãªã‚Šã¾ã™</p>
    <div class="disclaimer" style="margin-top:16px">
      &#x26a0;&#xfe0f; æœ¬ã‚µã‚¤ãƒˆã¯ãƒ•ã‚¡ãƒ³ã«ã‚ˆã‚‹<strong>éå…¬å¼</strong>ã®ä¼ç”»ã§ã™ã€‚<br>
      toybeeå…¬å¼ãƒ»é–¢ä¿‚è€…ã¸ã®æœ¬ã‚µã‚¤ãƒˆã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã¯ã”é æ…®ãã ã•ã„ã€‚<br>
      ã”æ„è¦‹ãƒ»ã”è³ªå•ã¯ <a href="https://x.com/inaken816" style="color:#f87171">@inaken816</a> (X) / <span id="emailLink1" style="color:#f87171;cursor:pointer;text-decoration:underline">ãƒ¡ãƒ¼ãƒ«</span> ã¾ã§
    </div>
  </div>
</div>

<div id="mainApp" style="display:none">
  <div class="bee" style="left:5%;animation-delay:0s">&#x1f41d;</div><div class="bee" style="left:17%;animation-delay:2s">&#x1f41d;</div><div class="bee" style="left:29%;animation-delay:4s">&#x1f41d;</div><div class="bee" style="left:41%;animation-delay:6s">&#x1f41d;</div><div class="bee" style="left:53%;animation-delay:1s">&#x1f41d;</div><div class="bee" style="left:65%;animation-delay:3s">&#x1f41d;</div><div class="bee" style="left:77%;animation-delay:5s">&#x1f41d;</div><div class="bee" style="left:89%;animation-delay:7s">&#x1f41d;</div>
  <div class="header">
    <div class="road">ROAD TO LIQUIDROOM</div>
    <div class="title">ãƒã‚¤ã‚»ãƒˆãƒªãƒ¡ãƒ¼ã‚«ãƒ¼</div>
    <div class="subtitle">2026.3.22 (SUN) æµæ¯”å¯¿LIQUIDROOM</div>
    <div class="user-info">&#x1f41d; <span id="dispNick"></span>ã•ã‚“ã€ã‚ˆã†ã“ãï¼<button onclick="changeNick()">å¤‰æ›´</button></div>
  </div>
  <div class="cd-heading">&#x1f41d; é–‹æ¼”ã¾ã§ã‚ã¨</div>
  <div class="cd-wrap">
    <div><div class="cd-box"><span class="cd-num" id="cdD">00</span></div><span class="cd-label">DAYS</span></div>
    <div class="cd-colon" id="col1">:</div>
    <div><div class="cd-box"><span class="cd-num" id="cdH">00</span></div><span class="cd-label">HRS</span></div>
    <div class="cd-colon" id="col2">:</div>
    <div><div class="cd-box"><span class="cd-num" id="cdM">00</span></div><span class="cd-label">MIN</span></div>
    <div class="cd-colon" id="col3">:</div>
    <div><div class="cd-box"><span class="cd-num" id="cdS">00</span></div><span class="cd-label">SEC</span></div>
  </div>
  <div class="content">
    <div style="max-width:520px;margin:0 auto 12px;padding:0 20px;text-align:center;font-size:14px;color:#cbd5e1;line-height:2">
      ãƒ­ãƒƒã‚¯ãƒãƒ³ãƒ‰ toybee ã®<br>
      <strong style="color:#FFD700">2026å¹´3æœˆ22æ—¥ï¼ˆæ—¥ï¼‰æµæ¯”å¯¿LIQUIDROOM ãƒ¯ãƒ³ãƒãƒ³ãƒ©ã‚¤ãƒ–</strong><br>
      ã®æˆåŠŸã‚’é¡˜ã£ã¦ã€toybeeãƒ•ã‚¡ãƒ³ãŒåˆ¶ä½œã—ãŸ<strong style="color:#f1f5f9">å¿œæ´ä¼ç”»ãƒšãƒ¼ã‚¸</strong>ã§ã™ã€‚
    </div>
    <div style="max-width:520px;margin:0 auto 16px;padding:12px 20px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);border-radius:10px;font-size:14px;color:#cbd5e1;line-height:2;text-align:left">
      &#x1f3b8; è´ããŸã„æ›²ã‚’é¸ã‚“ã§ãƒã‚¤ã‚»ãƒˆãƒªã‚’ä½œã‚ã†ï¼ˆæœ€å¤§20æ›²ï¼‰<br>
      &#x1f4cb; ä¸¦ã¹æ›¿ãˆã¦è‡ªåˆ†ã ã‘ã®ãƒã‚¤ã‚»ãƒˆãƒªã«<br>
      &#x1f41d; ã€ŒEn.ã€ãƒœã‚¿ãƒ³ã§ã‚¢ãƒ³ã‚³ãƒ¼ãƒ«è¨­å®šï¼ˆæœ€å¤§3æ›²ï¼‰<br>
      &#x1d54f; å®Œæˆã—ãŸã‚‰Xã§ã‚·ã‚§ã‚¢ï¼
    </div>
    <details class="desc-wrap">
      <summary>&#x2699;&#xfe0f; ãã‚ã—ã„ä½¿ã„æ–¹ &#x25be;</summary>
      <div class="desc-body">
        <strong style="color:#f1f5f9">&#x1f3b8; é¸æ›²ã®ãƒ«ãƒ¼ãƒ«</strong><br>
        ãƒ»è´ããŸã„æ›²ã‚’é¸ã‚“ã§ã€æœ€å¤§ <strong style="color:#FFD700">20æ›²</strong> ã¾ã§ãƒã‚¤ã‚»ãƒˆãƒªã«è¿½åŠ ã§ãã¾ã™<br>
        ãƒ»é¸ã‚“ã æ›²ã¯è‡ªå‹•çš„ã«ãƒã‚¤ã‚»ãƒˆãƒªã¸è¿½åŠ ã•ã‚Œã¾ã™<br>
        <div class="desc-tip">&#x1f4a1; ã‚»ãƒˆãƒªã¯ã“ã®ç«¯æœ«ãƒ»ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã¨ã¯é€£å‹•ã—ã¾ã›ã‚“ï¼‰ã€‚ã‚·ã‚§ã‚¢ã—ãŸã„å ´åˆã¯ãƒã‚¤ã‚»ãƒˆãƒªã‚¿ãƒ–ã‹ã‚‰Xã«ã‚·ã‚§ã‚¢ã™ã‚‹ã‹ã€URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚</div>
        <strong style="color:#f1f5f9">&#x1f4cb; ãƒã‚¤ã‚»ãƒˆãƒªã®ä½¿ã„æ–¹</strong><br>
        ãƒ»ã€Œ&#x25b2;ã€ã€Œ&#x25bc;ã€ãƒœã‚¿ãƒ³ã§è‡ªç”±ã«ä¸¦ã³æ›¿ãˆå¯èƒ½<br>
        ãƒ»æ›²ã®å³ã«ã‚ã‚‹ã€Œ<strong style="color:#FFD700">En.</strong>ã€ãƒœã‚¿ãƒ³ã§ã‚¢ãƒ³ã‚³ãƒ¼ãƒ«ã«è¨­å®šã§ãã¾ã™ï¼ˆæœ€å¤§3æ›²ï¼‰<br>
        ãƒ»ã‚¢ãƒ³ã‚³ãƒ¼ãƒ«æ›²ã¯æœ¬ç·¨ã®ä¸‹ã«åŒºåˆ‡ã‚Šç·šä»˜ãã§è¡¨ç¤ºã•ã‚Œã¾ã™<br>
        ãƒ»ã€Œ&#x2715;ã€ãƒœã‚¿ãƒ³ã§å€‹åˆ¥ã«å‰Šé™¤ã§ãã¾ã™
      </div>
    </details>
    <div id="sharedView" style="display:none"></div>
    <div class="tabs">
      <button class="tab active" data-tab="vote" onclick="switchTab('vote')">&#x1f3b8; é¸æ›²</button>
      <button class="tab" data-tab="setlist" onclick="switchTab('setlist')">&#x1f4cb; ãƒã‚¤ã‚»ãƒˆãƒª</button>
    </div>
    <div id="tabVote" class="card"></div>
    <div id="tabSetlist" class="card" style="display:none"></div>
  </div>
  <div class="disclaimer">
    &#x26a0;&#xfe0f; æœ¬ã‚µã‚¤ãƒˆã¯ãƒ•ã‚¡ãƒ³ã«ã‚ˆã‚‹<strong>éå…¬å¼</strong>ã®ä¼ç”»ã§ã™ã€‚toybeeå…¬å¼ã¨ã¯ä¸€åˆ‡é–¢ä¿‚ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
    å…¬å¼ãƒ»é–¢ä¿‚è€…ã¸ã®æœ¬ã‚µã‚¤ãƒˆã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã¯ã”é æ…®ãã ã•ã„ã€‚<br>
    ã”æ„è¦‹ãƒ»ã”è³ªå•ã¯ <a href="https://x.com/inaken816" style="color:#f87171">@inaken816</a> (X) / <span id="emailLink2" style="color:#f87171;cursor:pointer;text-decoration:underline">ãƒ¡ãƒ¼ãƒ«</span> ã¾ã§
  </div>
  <div style="text-align:center;padding:8px 16px 20px;font-size:11px;color:#475569">Made with &#x1f41d; for toybee @ LIQUIDROOM 2026.3.22</div>
</div>
<div id="toast" class="toast" style="display:none"></div>
<script>
window.onerror=function(m,u,l,c,e){console.error('ERR line '+l+': '+m);return false};
var DEADLINE=new Date("2026-03-22T18:00:00+09:00");
var MAX_MYSET=20;
var MAX_ENCORE=3;
var X_SHORT_URL="https://x.gd/qATK1";
var HASHTAG="#toybeeã‚»ãƒˆãƒªä½œã£ã¦ã¿ãŸ";
var DEFAULT_NICK="åç„¡ã—ã‚¯ãƒ«ãƒ¼";
var BASE_URL=location.href.split("#")[0].split("?")[0];
var GAS_URL="https://script.google.com/macros/s/AKfycbxRzLTTPdkB7yOc8XeNrQzNEBQ6NyM0P8SkA8rUR6RNJqgdS_4YGrfMhsuv1RkBVMXHnA/exec";

var ALBUMS=[
{name:â€œTHE EARLY TOYBEEâ€,color:â€#FFD700â€,songs:[â€œå…¨ç±³ã¯æ³£ã‹ãªã„â€,â€œãã‚Œã‚†ã‘!å¤¢ã¿ã‚‹ã‚¾ãƒ³ãƒ“ãƒ¼ã‚º!!â€,â€œFlight Musicâ€,â€œé›»è„³ãƒ´ã‚£ã‚¸ãƒ©ãƒ³ãƒ†â€,â€œé»æ˜ã‚°ãƒƒãƒ‰ãƒ«ãƒ¼ã‚¶ãƒ¼â€,â€œã‚ã‚‰ã—ã®ã‚ˆã‚‹ã«â€,â€œã„ãªã›â€,â€œã‚ã»ã‚“ã ã‚‰ã„ãµâ€]},
{name:â€œREVIVALâ€,color:â€#8B5CF6â€,songs:[â€œæƒ‘æ˜Ÿãƒ€ãƒ–ãƒªã‚¹â€,â€œSuper Imaginationâ€,â€œãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ãƒ©ãƒ´ã‚¡ãƒ¼â€,â€œé¢¨çŸ¥ã‚‰ã¬ã²ã¨â€,â€œãƒ•ãƒ­ãƒ ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ©ãƒ³ãƒ‰â€,â€œTeenage Blackâ€,â€œã‚·ãƒ¼ãƒ©ã‚«ãƒ³ã‚¹ã¨æ–‡å­¦â€]},
{name:â€œLOOKBACK TO THE FUTUREâ€,color:â€#06B6D4â€,songs:[â€œLOOKBACKâ€,â€œGolden Ageâ€,â€œã‚¹ãƒ†ãƒ«ã‚ªãƒ³ãƒŠâ€,â€œé“åŒ–å¸«ã®ãƒ©ãƒ–ã‚½ãƒ³ã‚°â€,â€œãƒ©ã‚¤ãƒ‰ãƒ»ã‚¢ãƒ³ãƒ‰ãƒ»ãƒ©ã‚¤ãƒ–â€,â€œS.Y.S -Save Your Souls-â€,â€œTO THE FUTUREâ€]},
{name:â€œTOYROCK INVASIONâ€,color:â€#EF4444â€,songs:[â€œTOY ROCK -TOYBEEã®ãƒ†ãƒ¼ãƒ-â€,â€œã‚·ãƒ¢ã‚­ã‚¿ãƒ»ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ»ãƒ–ãƒ«ãƒ¼ã‚¹â€,â€œCAT GIRLâ€,â€œJonnieâ€™s Rockâ€™nâ€™Roll Lampâ€,â€œPlaylist in your Heartâ€]},
{name:â€œSinglesâ€,color:â€#F59E0Bâ€,songs:[â€œã²ã¨ã¤ã ã‘â€,â€œãƒãƒŠãƒãƒ«â€]}
];
var ALL_SONGS=ALBUMS.flatMap(function(a){return a.songs.map(function(s){return{title:s,album:a.name,color:a.color}})});

function esc(s){return String(s).replace(/&/g,â€&â€).replace(/</g,â€<â€).replace(/>/g,â€>â€).replace(/â€/g,â€"â€).replace(/â€™/g,â€'â€)}
var currentNick=â€â€,currentTab=â€œvoteâ€,currentFilter=â€œallâ€,toastTimer=null;
var pendingSelections=new Set();
var mySetlist=[];
var encoreSet=new Set();

function showToast(msg){var el=document.getElementById(â€œtoastâ€);el.textContent=msg;el.style.display=â€œblockâ€;clearTimeout(toastTimer);toastTimer=setTimeout(function(){el.style.display=â€œnoneâ€},2500)}
function apiPost(body){try{fetch(GAS_URL,{method:â€œPOSTâ€,body:JSON.stringify(body)})}catch(e){}}
function songIdx(t){return ALL_SONGS.findIndex(function(s){return s.title===t})}
function encodeSetlist(l,enc){
var codes=l.filter(function(t){return!enc.has(t)}).map(function(t){return String(songIdx(t)).padStart(2,â€œ0â€)}).filter(function(v){return v!==â€-1â€});
var eCodes=l.filter(function(t){return enc.has(t)}).map(function(t){return String(songIdx(t)).padStart(2,â€œ0â€)}).filter(function(v){return v!==â€-1â€});
var out=codes.join(â€-â€);
if(eCodes.length)out+=â€*â€+eCodes.join(â€-â€);
return out;
}
function decodeSetlist(h){
if(!h||!h.startsWith(â€œs=â€))return null;
var raw=h.substring(2);var parts=raw.split(â€*â€);
function parse(str){if(!str)return[];return str.split(â€-â€).map(function(p){var i=parseInt(p,10);return(!isNaN(i)&&i>=0&&i<ALL_SONGS.length)?ALL_SONGS[i].title:null}).filter(Boolean)}
var main=parse(parts[0]);var enc=parse(parts[1]||â€â€);
var all=main.concat(enc);
return all.length?{songs:all,encore:new Set(enc)}:null;
}
function getShareURL(l,enc){return BASE_URL+â€#s=â€+encodeSetlist(l,enc)}
function saveLocal(){try{localStorage.setItem(â€œtoybee_setlistâ€,JSON.stringify(mySetlist));localStorage.setItem(â€œtoybee_nickâ€,currentNick);localStorage.setItem(â€œtoybee_encoreâ€,JSON.stringify(Array.from(encoreSet)))}catch(e){}}
function loadLocal(){
try{var s=localStorage.getItem(â€œtoybee_setlistâ€);if(s){try{mySetlist=JSON.parse(s)}catch(e){mySetlist=[]}}
var e=localStorage.getItem(â€œtoybee_encoreâ€);if(e){try{encoreSet=new Set(JSON.parse(e))}catch(ex){encoreSet=new Set()}}}catch(err){}
}

function enterApp(){
var v=document.getElementById(â€œnickInputâ€).value.trim()||DEFAULT_NICK;
currentNick=v;loadLocal();try{localStorage.setItem(â€œtoybee_nickâ€,v)}catch(e){}
document.getElementById(â€œnickScreenâ€).style.display=â€œnoneâ€;
document.getElementById(â€œmainAppâ€).style.display=â€œblockâ€;
document.getElementById(â€œdispNickâ€).textContent=v;
renderAll();
}
function changeNick(){
currentNick=â€â€;mySetlist=[];encoreSet=new Set();
document.getElementById(â€œnickScreenâ€).style.display=â€œflexâ€;
document.getElementById(â€œmainAppâ€).style.display=â€œnoneâ€;
document.getElementById(â€œnickInputâ€).value=â€â€;
}
(function(){
try{var saved=localStorage.getItem(â€œtoybee_nickâ€);
if(saved){currentNick=saved;loadLocal();document.getElementById(â€œnickScreenâ€).style.display=â€œnoneâ€;document.getElementById(â€œmainAppâ€).style.display=â€œblockâ€;document.getElementById(â€œdispNickâ€).textContent=saved;renderAll()}}catch(e){}
document.getElementById(â€œnickInputâ€).addEventListener(â€œkeydownâ€,function(e){if(e.key===â€œEnterâ€)enterApp()});
})();
(function(){var a=atob(â€œbWFpbHRvOmYwMDAxNjdhQHlhaG9vLmNvLmpwâ€);var e1=document.getElementById(â€œemailLink1â€);var e2=document.getElementById(â€œemailLink2â€);if(e1)e1.onclick=function(){location.href=a};if(e2)e2.onclick=function(){location.href=a}})();
(function(){var d=decodeSetlist(location.hash.substring(1));if(d){setTimeout(function(){var el=document.getElementById(â€œsharedViewâ€);var h=â€™<div class="shared-overlay"><div style="text-align:center;margin-bottom:12px"><span style="font-size:16px;font-weight:700;color:#FFD700">ğŸ å…±æœ‰ã•ã‚ŒãŸãƒã‚¤ã‚»ãƒˆãƒª</span></div>â€™;var mainS=d.songs.filter(function(t){return!d.encore.has(t)});var encS=d.songs.filter(function(t){return d.encore.has(t)});mainS.forEach(function(t,i){h+=â€™<div class="shared-song"><span style="color:#94a3b8;font-size:13px;min-width:30px;font-weight:700">â€™+(i+1)+â€™.</span><span style="font-size:14px;color:#f1f5f9">â€™+esc(t)+â€™</span></div>â€™});if(encS.length){h+=â€™<div class="encore-divider"><div class="encore-divider-line"></div><div class="encore-divider-text">ENCORE</div><div class="encore-divider-line"></div></div>â€™;encS.forEach(function(t){h+=â€™<div class="shared-song enc"><span style="color:#FFD700;font-size:13px;min-width:30px;font-weight:700">En.</span><span style="font-size:14px;color:#f1f5f9">â€™+esc(t)+â€™</span></div>â€™})}h+=â€™<div style="text-align:center;margin-top:12px"><button class="btn-sm" style="background:rgba(255,215,0,.1);color:#FFD700;border:1px solid rgba(255,215,0,.2)" onclick="document.getElementById(\'sharedView\').style.display=\'none\';history.replaceState(null,\'\',BASE_URL)">é–‰ã˜ã‚‹</button></div></div>â€™;el.innerHTML=h;el.style.display=â€œblockâ€},300)}})();

function tick(){var d=DEADLINE-new Date();if(d<=0){document.querySelector(â€.cd-headingâ€).textContent=â€œğŸ é–‹æ¼”ã—ã¾ã—ãŸï¼â€;return}var s=Math.floor(d/1000),sec=s%60;document.getElementById(â€œcdDâ€).textContent=String(Math.floor(s/86400)).padStart(2,â€œ0â€);document.getElementById(â€œcdHâ€).textContent=String(Math.floor(s%86400/3600)).padStart(2,â€œ0â€);document.getElementById(â€œcdMâ€).textContent=String(Math.floor(s%3600/60)).padStart(2,â€œ0â€);document.getElementById(â€œcdSâ€).textContent=String(sec).padStart(2,â€œ0â€);var op=sec%2===0?1:.3;document.getElementById(â€œcol1â€).style.opacity=op;document.getElementById(â€œcol2â€).style.opacity=op;document.getElementById(â€œcol3â€).style.opacity=op}
setInterval(tick,1000);tick();

function switchTab(id){currentTab=id;pendingSelections.clear();document.querySelectorAll(â€.tabâ€).forEach(function(t){t.classList.toggle(â€œactiveâ€,t.dataset.tab===id)});document.getElementById(â€œtabVoteâ€).style.display=id===â€œvoteâ€?â€œblockâ€:â€œnoneâ€;document.getElementById(â€œtabSetlistâ€).style.display=id===â€œsetlistâ€?â€œblockâ€:â€œnoneâ€;renderAll()}

function togglePending(idx){
var title=ALL_SONGS[idx].title;
if(pendingSelections.has(title)){pendingSelections.delete(title)}
else{
var room=MAX_MYSET-mySetlist.filter(function(s){return!pendingSelections.has(s)}).length;
if(pendingSelections.size>=room){showToast(â€œâš  ãƒã‚¤ã‚»ãƒˆãƒªã¯æœ€å¤§â€+MAX_MYSET+â€œæ›²ã¾ã§ã§ã™â€);return}
pendingSelections.add(title);
}
renderVote();
}
function submitVotes(){
if(!pendingSelections.size)return;
var selected=Array.from(pendingSelections);
var btn=document.querySelector(â€.submit-btnâ€);
btn.disabled=true;btn.textContent=â€œé€ä¿¡ä¸­â€¦â€;
selected.forEach(function(s){if(mySetlist.indexOf(s)===-1&&mySetlist.length<MAX_MYSET)mySetlist.push(s)});
saveLocal();pendingSelections.clear();
showToast(â€œğŸ â€œ+selected.length+â€œæ›²é¸ã³ã¾ã—ãŸï¼â€);
renderAll();
apiPost({action:â€œvoteâ€,nick:currentNick,songs:selected});
}

function renderVote(){
var el=document.getElementById(â€œtabVoteâ€);
var inSet=new Set(mySetlist);
var remain=MAX_MYSET-mySetlist.length;
var h=â€™<div class="sec-header"><span class="sec-title">ğŸ¸ è´ããŸã„æ›²ã‚’é¸ã¼ã†</span>â€™;
h+=â€™<span class=â€œbadge â€˜+(remain>0?â€œbadge-goldâ€:â€œbadge-redâ€)+â€™â€>ã‚»ãƒˆãƒª â€˜+mySetlist.length+â€™/â€™+MAX_MYSET+â€˜æ›²</span></div>â€™;
if(remain<=0)h+=â€™<div style="background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:12px 16px;margin-bottom:14px;font-size:14px;color:#94a3b8">ãƒã‚¤ã‚»ãƒˆãƒªãŒä¸Šé™ï¼ˆ20æ›²ï¼‰ã«é”ã—ã¾ã—ãŸã€‚<br><span style="font-size:12px;color:#64748b">â€»ãƒã‚¤ã‚»ãƒˆãƒªã‚¿ãƒ–ã‹ã‚‰æ›²ã‚’å‰Šé™¤ã™ã‚‹ã¨ã€æ–°ã—ã„æ›²ã‚’é¸ã¹ã¾ã™ã€‚</span></div>â€™;
h+=â€™<div class="filters">â€™;
ALBUMS.forEach(function(a){var ac=currentFilter===a.name;h+=â€™<button class=â€œfilter-btnâ€ style=â€œbackground:â€™+(ac?a.color:â€œrgba(255,255,255,.06)â€)+â€™;color:â€™+(ac?â€#000â€:â€#cbd5e1â€)+â€™â€ onclick=â€œcurrentFilter='â€™+esc(a.name)+â€™';renderVote()â€>â€™+esc(a.name)+â€™</button>â€™});
h+=â€™<button class=â€œfilter-btnâ€ style=â€œbackground:â€™+(currentFilter===â€œallâ€?â€#FFD700â€:â€œrgba(255,255,255,.06)â€)+â€™;color:â€™+(currentFilter===â€œallâ€?â€#000â€:â€#cbd5e1â€)+â€™â€ onclick=â€œcurrentFilter='all';renderVote()â€>ALL</button>â€™;
h+=â€™</div>â€™;
var filtered=currentFilter===â€œallâ€?ALL_SONGS:ALL_SONGS.filter(function(s){return s.album===currentFilter});
filtered.forEach(function(s){
var already=inSet.has(s.title)&&!pendingSelections.has(s.title);
var ip=pendingSelections.has(s.title);
var idx=songIdx(s.title);
if(already){h+=â€™<div class="song-item inset"><div class="song-check">âœ“</div><div class="song-info"><span class="song-name">â€™+esc(s.title)+â€™</span><br><span class="song-album" style="color:'+s.color+';background:'+s.color+'15">â€™+esc(s.album)+â€™</span></div><span style="font-size:12px;color:#64748b">ã‚»ãƒˆãƒªã«è¿½åŠ æ¸ˆ</span></div>â€™}
else{var can=remain>0||ip;h+=â€™<div class=â€œsong-item â€˜+(ip?â€œcheckedâ€:â€â€)+â€™â€ onclick=â€â€™+(can?â€œtogglePending(â€+idx+â€)â€:â€â€)+â€™â€><div class="song-check">â€™+(ip?â€œâœ“â€:â€â€)+â€™</div><div class="song-info"><span class="song-name">â€™+esc(s.title)+â€™</span><br><span class="song-album" style="color:'+s.color+';background:'+s.color+'15">â€™+esc(s.album)+â€™</span></div></div>â€™}
});
var sc=pendingSelections.size;
h+=â€™<div class="submit-bar"><button class=â€œsubmit-btnâ€ â€˜+(sc===0?â€œdisabledâ€:â€â€)+â€ onclick="submitVotes()">ğŸ â€œ+(sc>0?sc+â€œæ›²ã‚’ã‚»ãƒˆãƒªã«è¿½åŠ â€:â€œæ›²ã‚’é¸ã‚“ã§ãã ã•ã„â€)+â€™</button>â€™;
h+=â€™<div class="submit-count">â€™+(sc>0?Array.from(pendingSelections).join(â€ã€â€):remain>0?â€œã‚¿ãƒƒãƒ—ã—ã¦æ›²ã‚’é¸ã‚“ã§ã‹ã‚‰è¿½åŠ ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„â€:â€â€)+â€™</div></div>â€™;
el.innerHTML=h;
}

function toggleEncore(idx){
var title=ALL_SONGS[idx].title;
if(encoreSet.has(title)){encoreSet.delete(title)}
else{if(encoreSet.size>=MAX_ENCORE)return;encoreSet.add(title)}
saveLocal();renderSetlist();
}
function moveMain(from,to){
var mains=mySetlist.filter(function(t){return!encoreSet.has(t)});
if(to<0||to>=mains.length)return;
var fi=mySetlist.indexOf(mains[from]);var ti=mySetlist.indexOf(mains[to]);
mySetlist[fi]=mains[to];mySetlist[ti]=mains[from];
saveLocal();renderSetlist();
}
function moveEnc(from,to){
var encs=mySetlist.filter(function(t){return encoreSet.has(t)});
if(to<0||to>=encs.length)return;
var fi=mySetlist.indexOf(encs[from]);var ti=mySetlist.indexOf(encs[to]);
mySetlist[fi]=encs[to];mySetlist[ti]=encs[from];
saveLocal();renderSetlist();
}
function rmFromSet(i){var t=mySetlist[i];encoreSet.delete(t);mySetlist.splice(i,1);saveLocal();showToast(â€œâœ• ã€Œâ€+t+â€ã€ã‚’å‰Šé™¤ã—ã¾ã—ãŸâ€);renderSetlist()}
function clearMySet(){if(!confirm(â€œãƒã‚¤ã‚»ãƒˆãƒªã‚’ç©ºã«ã—ã¾ã™ã‹ï¼Ÿâ€))return;mySetlist=[];encoreSet=new Set();saveLocal();renderSetlist()}
function shareMySetlist(){
var l=mySetlist;if(!l.length){showToast(â€œâš  ãƒã‚¤ã‚»ãƒˆãƒªãŒç©ºã§ã™â€);return}
var url=getShareURL(l,encoreSet);
var text=â€œğŸ ãƒã‚¤ã‚»ãƒˆãƒªä½œã£ã¦ã¿ãŸï¼\nâ€+url+â€\nâ€+HASHTAG;
window.open(â€œhttps://twitter.com/intent/tweet?text=â€+encodeURIComponent(text),â€_blankâ€,â€œnoopener,noreferrerâ€);
}

function renderSetlist(){
var el=document.getElementById(â€œtabSetlistâ€);
var h=â€™<button class="btn-share" onclick="shareMySetlist()">ğ• ãƒã‚¤ã‚»ãƒˆãƒªã‚’ã‚·ã‚§ã‚¢ã™ã‚‹</button>â€™;
h+=â€™<div class="sec-header" style="margin-top:20px"><span class="sec-title">ğŸ¤ ãƒã‚¤ã‚»ãƒˆãƒª (â€™+mySetlist.length+â€™/â€™+MAX_MYSET+â€™)</span>â€™;
h+=â€™<span class="encore-badge">En. â€˜+encoreSet.size+â€™/â€™+MAX_ENCORE+â€™</span>â€™;
h+=â€™<button class="btn-sm btn-clear" onclick="clearMySet()">ç©ºã«ã™ã‚‹</button></div>â€™;
if(!mySetlist.length){h+=â€™<div class="empty">é¸æ›²ã‚¿ãƒ–ã§æ›²ã‚’é¸ã¶ã¨ãƒã‚¤ã‚»ãƒˆãƒªã«è¿½åŠ ã•ã‚Œã¾ã™</div>â€™}
else{
var mainSongs=mySetlist.filter(function(t){return!encoreSet.has(t)});
var encSongs=mySetlist.filter(function(t){return encoreSet.has(t)});
mainSongs.forEach(function(t,i){
var gi=mySetlist.indexOf(t);var si=songIdx(t);
h+=â€™<div class="my-row">â€™;
h+=â€™<div class="my-arrows"><button class=â€œmy-arrowâ€ â€˜+(i===0?â€œdisabledâ€:â€â€)+â€ onclick="moveMain(â€+i+â€,â€+(i-1)+â€)">â–²</button>â€;
h+=â€™<button class=â€œmy-arrowâ€ â€˜+(i===mainSongs.length-1?â€œdisabledâ€:â€â€)+â€ onclick="moveMain(â€+i+â€,â€+(i+1)+â€)">â–¼</button></div>â€;
h+=â€™<span class="my-num">â€™+(i+1)+â€™.</span>â€™;
h+=â€™<span class="my-title">â€™+esc(t)+â€™</span>â€™;
h+=â€™<button class=â€œen-toggleâ€™+(encoreSet.size>=MAX_ENCORE?â€ disabledâ€:â€â€)+â€™â€ onclick=â€œtoggleEncore(â€™+si+â€™)â€>En.</button>â€™;
h+=â€™<button class="my-rm" onclick="rmFromSet('+gi+')">âœ•</button></div>â€™;
});
if(encSongs.length){
h+=â€™<div class="encore-divider"><div class="encore-divider-line"></div><div class="encore-divider-text">ENCORE</div><div class="encore-divider-line"></div></div>â€™;
encSongs.forEach(function(t,i){
var gi=mySetlist.indexOf(t);var si=songIdx(t);
h+=â€™<div class="my-row encore">â€™;
h+=â€™<div class="my-arrows"><button class=â€œmy-arrowâ€ â€˜+(i===0?â€œdisabledâ€:â€â€)+â€ onclick="moveEnc(â€+i+â€,â€+(i-1)+â€)">â–²</button>â€;
h+=â€™<button class=â€œmy-arrowâ€ â€˜+(i===encSongs.length-1?â€œdisabledâ€:â€â€)+â€ onclick="moveEnc(â€+i+â€,â€+(i+1)+â€)">â–¼</button></div>â€;
h+=â€™<span class="my-num">En.</span>â€™;
h+=â€™<span class="my-title">â€™+esc(t)+â€™</span>â€™;
h+=â€™<button class="en-toggle active" onclick="toggleEncore('+si+')">En.</button>â€™;
h+=â€™<button class="my-rm" onclick="rmFromSet('+gi+')">âœ•</button></div>â€™;
});
}
}
h+=â€™<div style="font-size:12px;color:#94a3b8;margin-top:10px">ğŸ’¡ â–²â–¼ã§æ›²é †å¤‰æ›´ ãƒ»ã€ŒEn.ã€ã§ã‚¢ãƒ³ã‚³ãƒ¼ãƒ«è¨­å®šï¼ˆæœ€å¤§3æ›²ï¼‰</div>â€™;
el.innerHTML=h;
}

function renderAll(){renderVote();renderSetlist()}
renderAll();

</script>
</body>
</html>